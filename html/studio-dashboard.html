<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Partner Studio Hub | The Real Studios</title>
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="stylesheet" href="../assets/css/dashboard.css">
  <script type="module" src="../assets/js/guard.js"></script>

  <style>
    /* --- CORE DASHBOARD STYLES --- */
    :root { --primary: #E31E24; --accent: #00ffc3; --bg: #050505; --glass: rgba(255, 255, 255, 0.05); }
    body { background-color: var(--bg); color: white; font-family: 'Inter', sans-serif; overflow-x: hidden; }

    /* 1. CINEMATIC HERO */
    .hero-container { min-height: 85vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    .hero-logo-center { width: 450px; max-width: 80%; margin-bottom: 40px; filter: brightness(0) invert(1) drop-shadow(0 0 30px rgba(227, 30, 36, 0.3)); animation: cinematicGlow 3s infinite alternate; }
    @keyframes cinematicGlow { from { transform: scale(1); filter: drop-shadow(0 0 20px rgba(227, 30, 36, 0.2)); } to { transform: scale(1.02); filter: drop-shadow(0 0 40px rgba(227, 30, 36, 0.5)); } }

    /* 2. CHAT UI */
    .wa-container { height: 70vh; background: #0d0d0d; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; overflow: hidden; }
    .wa-body { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 8px; background: radial-gradient(#1a1a1a 1px, transparent 1px); background-size: 20px 20px; }
    .wa-row { display: flex; width: 100%; margin-bottom: 5px; }
    .wa-row.sent { justify-content: flex-end; }
    .wa-row.received { justify-content: flex-start; }
    .wa-bubble { max-width: 70%; padding: 12px 16px; color: white; border-radius: 12px; font-size: 0.95rem; line-height: 1.5; position: relative; }
    .wa-row.sent .wa-bubble { background: var(--primary); border-bottom-right-radius: 2px; }
    .wa-row.received .wa-bubble { background: #2a2a2a; border: 1px solid rgba(255,255,255,0.1); border-bottom-left-radius: 2px; }
    .wa-time { display: block; font-size: 0.65rem; margin-top: 4px; opacity: 0.7; text-align: right; }
    .wa-footer { padding: 15px; background: rgba(255,255,255,0.02); display: flex; gap: 10px; border-top: 1px solid rgba(255,255,255,0.05); }
    .wa-input { flex: 1; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); padding: 12px 20px; color: white; border-radius: 25px; outline: none; }
    .wa-send-btn { width: 45px; height: 45px; border-radius: 50%; background: var(--primary); border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }

    /* 3. MODALS & DETAILS */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
    .modal-content { background: #121212; border: 1px solid rgba(255,255,255,0.1); width: 90%; max-width: 750px; max-height: 90vh; overflow-y: auto; border-radius: 16px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); display: flex; flex-direction: column; }
    .modal-header { padding: 20px 30px; background: #1a1a1a; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10; }
    .modal-body { padding: 30px; overflow-y: auto; }
    
    .detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 20px; margin-bottom: 30px; background: rgba(255,255,255,0.02); padding: 20px; border-radius: 10px; }
    .detail-item label { font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 5px; }
    .detail-item span { font-size: 1.1rem; color: white; font-weight: 600; }

    /* ROADMAP STYLES */
    .roadmap-track { display: flex; justify-content: space-between; background: rgba(255,255,255,0.05); padding: 6px; border-radius: 50px; margin: 25px 0; position: relative; }
    .roadmap-step { flex: 1; text-align: center; padding: 10px; border-radius: 40px; font-size: 0.8rem; color: #666; cursor: pointer; transition: 0.3s; position: relative; z-index: 2; font-weight: 500; }
    .roadmap-step:hover { background: rgba(255,255,255,0.1); color: white; }
    .roadmap-step.active { background: var(--accent); color: black; font-weight: bold; box-shadow: 0 0 15px rgba(0, 255, 195, 0.3); }
    .roadmap-step.completed { color: var(--accent); }

    /* WHITE TEXT INSTRUCTION BOX */
    .instruction-box {
        background: rgba(255,255,255,0.05);
        padding: 25px;
        border-radius: 12px;
        line-height: 1.7;
        font-size: 1rem;
        border: 1px solid rgba(255,255,255,0.1);
        color: #ffffff !important; /* Forces White Text */
        white-space: pre-wrap; 
        margin-bottom: 30px;
    }

    /* UPLOAD PORTAL */
    .drive-upload-box { padding: 25px; border: 1px dashed rgba(255,255,255,0.2); border-radius: 12px; text-align: center; background: rgba(0,0,0,0.2); }
    .drive-btn { display: inline-flex; align-items: center; gap: 10px; background: #222; border: 1px solid #444; color: white; padding: 12px 25px; border-radius: 8px; text-decoration: none; transition: 0.2s; font-weight: 500; }
    .drive-btn:hover { background: #333; border-color: #666; }
    .drive-icon { width: 20px; height: 20px; }

    /* FAB */
    .pitch-fab { position: fixed; bottom: 30px; right: 30px; background: var(--accent); color: black; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; border: none; cursor: pointer; box-shadow: 0 0 20px rgba(0,255,195,0.4); z-index: 999; transition: transform 0.2s; }
    .pitch-fab:hover { transform: scale(1.1) rotate(90deg); }
    
    .modal-input { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 12px; color: white; border-radius: 8px; margin-bottom: 15px; outline: none; }
    .modal-close { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
    
    /* PITCH STATUS BADGES */
    .status-pill { padding: 4px 10px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; }
    .status-pending { background: rgba(255, 193, 7, 0.2); color: #ffc107; border: 1px solid rgba(255, 193, 7, 0.4); }
    .status-accepted { background: rgba(0, 255, 195, 0.2); color: #00ffc3; border: 1px solid rgba(0, 255, 195, 0.4); }
    .status-declined { background: rgba(227, 30, 36, 0.2); color: #E31E24; border: 1px solid rgba(227, 30, 36, 0.4); }

  </style>
</head>

<body>
  <div class="dashboard-wrapper">
    <aside class="dashboard-sidebar">
      <nav class="sidebar-nav">
        <div style="height: 50px;"></div>
        <button class="nav-item active" data-section="home">Partnership Home</button>
        <button class="nav-item" data-section="briefs">Incoming Briefs</button>
        <button class="nav-item" data-section="collabs">Active Projects</button>
        <button class="nav-item" data-section="pitches">My Pitches</button> <button class="nav-item" data-section="inbox">HQ Direct Chat</button>
        <button id="logoutBtn" class="nav-item logout" style="margin-top: 50px;">Log Out</button>
      </nav>
    </aside>

    <main class="dashboard-main">
      <video class="dashboard-video" autoplay muted loop playsinline>
        <source src="../assets/images/backgrounds/auth-video.mp4" type="video/mp4">
      </video>
      <div class="dashboard-overlay"></div>

      <section id="home" class="dashboard-section active">
        <div class="hero-container">
          <img src="../assets/images/logo.png" alt="Logo" class="hero-logo-center">
          <h2 id="studioNameDisplay" class="hero-welcome">Studio Partner</h2>
          <h1 class="hero-tagline">Unlimited <span class="text-highlight">Collaboration.</span></h1>
        </div>
      </section>

      <section id="briefs" class="dashboard-section">
        <h2 class="section-title">Incoming Briefs</h2>
        <div id="briefsList" class="projects-grid"></div>
      </section>

      <section id="collabs" class="dashboard-section">
        <h2 class="section-title">Active Projects</h2>
        <div id="collabsList" class="projects-grid"></div>
      </section>

      <section id="pitches" class="dashboard-section">
        <h2 class="section-title">My Pitch History</h2>
        <div id="myPitchesList" class="projects-grid"></div>
      </section>

      <section id="inbox" class="dashboard-section">
        <h2 class="section-title">HQ Secure Line</h2>
        <div class="wa-container">
            <div id="hqMessages" class="wa-body"></div>
            <div class="wa-footer">
                <input type="text" id="hqChatInput" class="wa-input" placeholder="Type a secure message...">
                <button id="hqSendBtn" class="wa-send-btn">âž¤</button>
            </div>
        </div>
      </section>
    </main>
  </div>

  <button id="openPitchModalBtn" class="pitch-fab" title="Pitch New Project">+</button>

  <div id="pitchModal" class="modal">
      <div class="modal-content" style="max-width: 500px;">
          <div class="modal-header">
              <h3 style="margin:0; color:var(--primary);">Pitch to HQ</h3>
              <button class="modal-close" onclick="document.getElementById('pitchModal').style.display='none'">Ã—</button>
          </div>
          <div class="modal-body">
              <label style="display:block; margin-bottom:5px; font-size:0.8rem; color:#888;">Project Title</label>
              <input type="text" id="pitchTitle" class="modal-input" placeholder="E.g. Summer Campaign">
              
              <div style="display:flex; gap:10px;">
                  <div style="flex:1;">
                      <label style="display:block; margin-bottom:5px; font-size:0.8rem; color:#888;">Budget</label>
                      <input type="number" id="pitchBudget" class="modal-input" placeholder="0.00">
                  </div>
                  <div style="width:80px;">
                      <label style="display:block; margin-bottom:5px; font-size:0.8rem; color:#888;">Currency</label>
                      <select id="pitchCurrency" class="modal-input"><option value="$">USD</option><option value="â‚¦">NGN</option><option value="Â£">GBP</option><option value="â‚¬">EUR</option></select>
                  </div>
              </div>

              <label style="display:block; margin-bottom:5px; font-size:0.8rem; color:#888;">Google Drive Link (For Assets)</label>
              <input type="text" id="pitchDrive" class="modal-input" placeholder="https://drive.google.com/...">

              <label style="display:block; margin-bottom:5px; font-size:0.8rem; color:#888;">Project Brief</label>
              <textarea id="pitchBrief" class="modal-input" style="height:100px; resize:vertical;"></textarea>
              
              <button id="sendPitchBtn" class="btn-primary" style="width:100%;">Send Pitch ðŸš€</button>
          </div>
      </div>
  </div>

  <div id="projectDetailModal" class="modal">
      <div class="modal-content">
          <div class="modal-header">
              <div>
                  <h2 id="detailTitle" style="margin:0; color:white; font-size:1.4rem;">Project Title</h2>
                  <small id="detailId" style="opacity:0.5; color:var(--accent); font-family:monospace;">ID: #12345</small>
              </div>
              <div style="display:flex; gap:10px; align-items:center;">
                  <button class="btn-primary" style="padding:5px 15px; font-size:0.8rem; height:auto;" onclick="window.open('https://meet.google.com/new', '_blank')">Meet</button>
                  <button class="modal-close" onclick="document.getElementById('projectDetailModal').style.display='none'">Ã—</button>
              </div>
          </div>
          
          <div class="modal-body">
              <div class="detail-grid">
                  <div class="detail-item"><label>Status</label><span id="detailStatus" style="color:var(--accent);">Active</span></div>
                  <div class="detail-item"><label>Budget</label><span id="detailBudget">$0.00</span></div>
                  <div class="detail-item"><label>Deadline</label><span id="detailDeadline">TBD</span></div>
                  <div class="detail-item"><label>Phase</label><span id="detailPhase">Discovery</span></div>
              </div>

              <h4 style="margin:0 0 10px 0; color:#888; font-size:0.9rem;">Project Roadmap (Click Step to Update)</h4>
              <div id="detailRoadmap" class="roadmap-track"></div>

              <h4 style="margin:20px 0 10px 0; color:#888; font-size:0.9rem;">Brief & Instructions</h4>
              <div class="instruction-box">
                  <p id="detailInstructions" style="margin:0;">Loading project details...</p>
              </div>

              <div class="drive-upload-box">
                  <h4 style="margin-top:0; color:white;">Deliverables Portal</h4>
                  <p style="opacity:0.6; font-size:0.8rem; margin-bottom:15px;">Securely upload final assets via Google Drive.</p>
                  
                  <a id="driveLinkBtn" href="#" target="_blank" class="drive-btn">
                      <img src="https://upload.wikimedia.org/wikipedia/commons/d/da/Google_Drive_logo.png" class="drive-icon" alt="Drive">
                      Open Upload Portal
                  </a>
                  <p id="noDriveLinkMsg" style="display:none; color:#E31E24; font-size:0.8rem; margin-top:10px;">No Upload Link Provided by Admin.</p>
              </div>
          </div>
      </div>
  </div>

  <script type="module" src="../assets/js/studio-dashboard.js"></script>
</body>
</html>